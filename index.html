<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>صدقة جارية - على روح الأستاذ محمود حمدان عبدالعزيز</title>
  <style>
    body {
      font-family: "Amiri", serif;
      background: #e9ecef;
      margin: 0;
      padding: 20px;
      line-height: 1.9;
      color: #222;
    }

    .container {
      max-width: 900px;
      margin: auto;
      background: #fff;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    }

    h1,
    h2 {
      text-align: center;
      margin-bottom: 10px;
      color: #0a3d62;
    }

    h3 {
      color: #00695c;
      border-right: 5px solid #00897b;
      padding-right: 10px;
    }

    .section {
      margin-bottom: 35px;
    }

    .surah-box {
      background: #f9f9f9;
      padding: 18px;
      border-radius: 12px;
      margin-bottom: 18px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.06);
      border-right: 4px solid #009688;
    }

    .dhikr {
      background: #fefefe;
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 12px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      border-right: 4px solid #00897b;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .dhikr-text {
      width: 100%;
      font-size: 18px;
      line-height: 1.6;
    }

    .dhikr-controls {
      width: 100%;
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }

    .dhikr-controls button {
      padding: 12px 20px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      background: #00897b;
      color: white;
      cursor: pointer;
      transition: 0.2s;
      flex-shrink: 0;
    }

    .dhikr-controls button:hover {
      background: #00695c;
      transform: scale(1.05);
    }

    .dhikr-controls button:active {
      animation: shake 0.2s;
    }

    @keyframes shake {
      0% {
        transform: translateX(0);
      }

      25% {
        transform: translateX(-3px);
      }

      50% {
        transform: translateX(3px);
      }

      75% {
        transform: translateX(-3px);
      }

      100% {
        transform: translateX(0);
      }
    }

    .circle {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: #ccc;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .circle .water {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 0%;
      background: #009688;
      border-radius: 0 0 50% 50%;
      transition: height 0.4s ease-in-out;
      z-index: 1;
    }

    .circle.maxed .water {
      background: #ff5722;
    }

    .circle .count-text {
      position: relative;
      z-index: 2;
      color: white;
      font-weight: bold;
      font-size: 16px;
    }

    .reminder-box {
      display: flex;
      flex-direction: column;
      gap: 10px;
      background: #f9f9f9;
      padding: 15px;
      border-radius: 12px;
      border-right: 4px solid #009688;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      max-width: 300px;
      margin: auto;
    }

    .reminder-box input,
    .reminder-box button {
      padding: 10px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    .reminder-box button {
      background: #00897b;
      color: white;
      cursor: pointer;
      border: none;
      transition: 0.2s;
    }

    .reminder-box button:hover {
      background: #00695c;
    }

    #popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #009688;
      color: white;
      padding: 25px 40px;
      border-radius: 15px;
      font-size: 18px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      z-index: 999;
      text-align: center;
    }

    #popup button {
      margin: 10px 5px 0 5px;
      padding: 10px 15px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      background: #00695c;
      color: white;
      font-size: 16px;
      transition: 0.2s;
    }

    #popup button:hover {
      background: #004d40;
    }

    @media (max-width: 600px) {
      .dhikr-text {
        font-size: 16px;
      }

      .dhikr-controls button {
        padding: 10px 16px;
        font-size: 15px;
      }

      .circle {
        width: 45px;
        height: 45px;
        font-size: 14px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>صدقة جارية</h1>
    <h2>على روح الأستاذ محمود حمدان عبدالعزيز</h2>

    <!-- سور القرآن -->
    <div class="section">
      <h3>آية الكرسي</h3>
      <div class="surah-box">
        <p style="text-align:center; font-size:18px;">
          اللَّهُ لَا إِلَٰهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ ۚ
          لَا تَأْخُذُهُ سِنَةٌ وَلَا نَوْمٌ ۚ
          لَهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الْأَرْضِ ۗ
          مَنْ ذَا الَّذِي يَشْفَعُ عِنْدَهُ إِلَّا بِإِذْنِهِ ۚ
          يَعْلَمُ مَا بَيْنَ أَيْدِيهِمْ وَمَا خَلْفَهُمْ ۖ
          وَلَا يُحِيطُونَ بِشَيْءٍ مِنْ عِلْمِهِ إِلَّا بِمَا شَاءَ ۚ
          وَسِعَ كُرْسِيُّهُ السَّمَاوَاتِ وَالْأَرْضَ ۖ
          وَلَا يَئُودُهُ حِفْظُهُمَا ۚ
          وَهُوَ الْعَلِيُّ الْعَظِيمُ
        </p>
      </div>

      <h3>سورة الفاتحة</h3>
      <div class="surah-box">
        <p>
          بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ
          الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ
          الرَّحْمَٰنِ الرَّحِيمِ
          مَالِكِ يَوْمِ الدِّينِ
          إِيَّاكَ نَعْبُدُ وَإِيَّاكَ نَسْتَعِينُ
          اهْدِنَا الصِّرَاطَ الْمُسْتَقِيمَ
          صِرَاطَ الَّذِينَ أَنْعَمْتَ عَلَيْهِمْ
          غَيْرِ الْمَغْضُوبِ عَلَيْهِمْ وَلَا الضَّالِّينَ
        </p>
      </div>

      <h3>سورة الإخلاص</h3>
      <div class="surah-box">
        <p>
          قُلْ هُوَ اللَّهُ أَحَدٌ
          اللَّهُ الصَّمَدُ
          لَمْ يَلِدْ وَلَمْ يُولَدْ
          وَلَمْ يَكُن لَّهُ كُفُوًا أَحَدٌ
        </p>
      </div>

      <h3>سورة الفلق</h3>
      <div class="surah-box">
        <p>
          قُلْ أَعُوذُ بِرَبِّ الْفَلَقِ
          مِن شَرِّ مَا خَلَقَ
          وَمِن شَرِّ غَاسِقٍ إِذَا وَقَبَ
          وَمِن شَرِّ النَّفَّاثَاتِ فِي الْعُقَدِ
          وَمِن شَرِّ حَاسِدٍ إِذَا حَسَدَ
        </p>
      </div>

      <h3>سورة الناس</h3>
      <div class="surah-box">
        <p>
          قُلْ أَعُوذُ بِرَبِّ النَّاسِ
          مَلِكِ النَّاسِ
          إِلَٰهِ النَّاسِ
          مِن شَرِّ الْوَسْوَاسِ الْخَنَّاسِ
          الَّذِي يُوَسْوِسُ فِي صُدُورِ النَّاسِ
          مِنَ الْجِنَّةِ وَالنَّاسِ
        </p>
      </div>
    </div>

    <!-- أذكار -->
    <div class="section">
      <h3>أذكار</h3>
      <div id="adhkar-list"></div>
    </div>

    <!-- تذكير يومي -->
    <div class="section">
      <h3>تذكير يومي بالتسبيح</h3>
      <div class="reminder-box">
        <label>اختر وقت التذكير:</label>
        <input type="time" id="reminder-time"/>
        <button onclick="setReminder()">حفظ التذكير</button>
      </div>
    </div>
  </div>

  <!-- بوب أب التهاني -->
  <div id="popup">
    <p>✨ بارك الله فيك! لقد أكملت كل الأذكار 10 مرات. نسأل الله أن يغفر ويرحم الفقيد ويجعل قبره روضة من رياض الجنة ✨</p>
    <button onclick="sharePopup()">مشاركة</button>
    <button onclick="closePopup()">إلغاء</button>
  </div>

  <script>
    const adhkar = [
      "سبحان الله وبحمده سبحان الله العظيم",
      "الحمد لله رب العالمين",
      "لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير",
      "لا حول ولا قوة إلا بالله العلي العظيم",
      "اللهم صلِّ وسلم على نبينا محمد",
      "أستغفر الله العظيم وأتوب إليه",
      "سبحان الله وبحمده عدد خلقه ورضا نفسه وزنة عرشه ومداد كلماته",
      "حسبي الله لا إله إلا هو، عليه توكلت وهو رب العرش العظيم",
      "سبحان الله والحمد لله ولا إله إلا الله والله أكبر",
      "اللهم اغفر للمؤمنين والمؤمنات والمسلمين والمسلمات الأحياء منهم والأموات",
      "اللهم اجعل القرآن ربيع قلوبنا ونور صدورنا وجلاء أحزاننا",
      "اللهم ارزقنا حسن الخاتمة",
      "اللهم اغفر وارحم عبدك محمود حمدان عبدالعزيز واجعل قبره روضة من رياض الجنة"
    ];

    const list = document.getElementById("adhkar-list");
    let popupShown = localStorage.getItem("popupShown") === "true";

    adhkar.forEach((text, idx) => {
      const div = document.createElement("div");
      div.className = "dhikr";
      let savedCount = localStorage.getItem("dhikr_" + idx) || 0;
      div.setAttribute("data-count", savedCount);

      div.innerHTML = `
        <div class="dhikr-text">${idx + 1} - ${text}</div>
        <div class="dhikr-controls">
          <button onclick="inc(this)">تسبيح</button>
          <div class="circle">
            <div class="water" style="height:${savedCount*10}%"></div>
            <span class="count-text">${savedCount}</span>
          </div>
          <button onclick="resetCount(this)">إعادة ضبط</button>
          <button onclick="shareDhikr('${text.replace(/'/g,"\\'")}')">مشاركة</button>
        </div>
      `;
      list.appendChild(div);
    });

    function showPopup() { document.getElementById("popup").style.display = "block"; }
    function closePopup() { document.getElementById("popup").style.display = "none"; }
    function sharePopup() {
      if(navigator.share){
        navigator.share({title:'أذكار',text:'لقد أكملت كل الأذكار 10 مرات!',url:window.location.href});
      } else { alert('المشاركة غير مدعومة على هذا الجهاز'); }
    }

    function checkAllCompleted() {
      if (popupShown) return;
      const allDhikr = document.querySelectorAll(".dhikr");
      const allComplete = Array.from(allDhikr).every(box => parseInt(box.getAttribute("data-count")) >= 10);
      if (allComplete) {
        popupShown = true;
        localStorage.setItem("popupShown", "true");
        showPopup();
      }
    }

    function inc(btn){
      const box = btn.closest(".dhikr");
      let count = parseInt(box.getAttribute("data-count"));
      if(count < 10){
        count++;
        box.setAttribute("data-count", count);
        const circle = box.querySelector(".circle");
        const water = circle.querySelector(".water");
        const text = circle.querySelector(".count-text");

        water.style.height = (count*10) + "%";
        text.textContent = count;

        if(count===10) circle.classList.add("maxed");
        localStorage.setItem("dhikr_"+Array.from(list.children).indexOf(box), count);
        if(navigator.vibrate) navigator.vibrate(100);
        checkAllCompleted();
      }
    }

    function resetCount(btn){
      const box = btn.closest(".dhikr");
      box.setAttribute("data-count",0);
      const circle = box.querySelector(".circle");
      const water = circle.querySelector(".water");
      const text = circle.querySelector(".count-text");

      water.style.height = "0%";
      text.textContent = "0";
      circle.classList.remove("maxed");
      localStorage.setItem("dhikr_"+Array.from(list.children).indexOf(box),0);
    }

    function shareDhikr(text){
      if(navigator.share){
        navigator.share({title:'أذكار',text:text,url:window.location.href});
      } else { alert('المشاركة غير مدعومة على هذا الجهاز'); }
    }

    window.addEventListener('load', () => {
      const savedTime = localStorage.getItem('reminderTime');
      if(savedTime) document.getElementById('reminder-time').value = savedTime;
    });

    if("Notification" in window){
      Notification.requestPermission().then(p => {
        if(p!=="granted") alert("لتفعيل التذكير اليومي، يجب السماح بالإشعارات");
      });
    }

    function setReminder(){
      const timeInput = document.getElementById('reminder-time').value;
      if(!timeInput) return alert("اختر وقتًا صالحًا");
      localStorage.setItem('reminderTime', timeInput);
      alert("تم حفظ التذكير!");
    }

    setInterval(()=>{
      const savedTime = localStorage.getItem('reminderTime');
      if(!savedTime) return;
      const now = new Date();
      const [hour,minute] = savedTime.split(":").map(Number);
      if(now.getHours()===hour && now.getMinutes()===minute){
        if("Notification" in window && Notification.permission==="granted"){
          new Notification("تذكير بالتسبيح",{body:"لا تنسى أداء أذكارك اليوم!"});
        }
      }
    },60000);
  </script>
</body>
</html>
